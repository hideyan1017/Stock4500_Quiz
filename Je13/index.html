<!DOCTYPE html>
<html lang="ja">
<link rel="icon" href="https://lh7-rt.googleusercontent.com/slidesz/AGV_vUctC95Tu99-RUGtSsRa7JCpKd1-JgUVm6J21aai3oFSZJuxSvV43A2n3IugfQwGGVyl8ACZxEdGCCj0lBs0HGvMbCgqYXDQV-28H9ovg29sICNOzaX5XCDpZTvtFH-jdakZ8U6LgFQDTStB-7e95u6U7j9hAg=nw?key=HN2h_traoN9V8eXyLO-uUA">
<meta name="robots" content="noindex, nofollow">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="robots" content="noindex, nofollow">
  <title>Stock4500_Je11</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f8;
      display: flex;
      justify-content: center;
      padding: 40px;
      margin: 0;
      min-height: 100vh;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.1);
      max-width: 600px;
      width: 100%;
      text-align: center;
    }
    h2 {
      color: #8a2be2;
      margin-bottom: 10px;
    }
    .start-screen, .quiz-screen, .result-screen {
      display: none;
    }
    .start-screen.active, .quiz-screen.active, .result-screen.active {
      display: block;
    }
    .input-group {
      margin: 20px 0;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      font-size: 1.1em;
    }
    input[type="number"] {
      padding: 12px;
      font-size: 1.1em;
      width: 70px;
      border: 2px solid #ddd;
      border-radius: 8px;
      text-align: center;
    }
    input[type="number"]:focus {
      border-color: #962dff;
      outline: none;
    }
    button {
      margin: 10px 5px;
      padding: 12px 30px;
      background: #962dff;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover:not(:disabled) {
      background: #660099;
    }
    .progress {
      margin: 15px 0;
      font-size: 0.95em;
      color: #7f8c8d;
    }
    .question {
      font-size: 1.3em;
      margin: 25px 0;
      color: #34495e;
    }
    .options {
      list-style: none;
      padding: 0;
    }
    .options li {
      margin: 10px auto;
      max-width: 80%;
    }
    .options label {
      display: block;
      padding: 14px 20px; /* 左右パディング均等 */
      background: #ecf0f1;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      border: 2px solid transparent;
      text-align: center; /* 中央揃え */
      font-weight: 500;
    }
    .options label:hover:not(.disabled) {
    }
    /* 丸を非表示 */
    .options input[type="radio"] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
      margin: 0;
      padding: 0;
    }
    .options label.disabled {
      cursor: not-allowed;
      opacity: 0.8;
    }
    .correct-highlight {
      background: #d5efdb !important;
      border-color: #27ae60 !important;
      color: #27ae60;
    }
    .incorrect-highlight {
      background: #fadbd8 !important;
      border-color: #e74c3c !important;
      color: #e74c3c;
    }
    .result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.2em;
      min-height: 2.4em;
    }
    .correct { color: #27ae60; }
    .incorrect { color: #e74c3c; }
    .final-score {
      font-size: 1.6em;
      margin: 20px 0;
      color: #2c3e50;
    }
    .restart {
      background: #95a5a6;
    }
    .restart:hover {
      background: #7f8c8d;
    }
    .info {
      font-size: 0.9em;
      color: #7f8c8d;
      margin-top: 10px;
    }
    .label {
      color: #2c3e50;
    }
	    .social-link {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }
    .social-link a {
      display: inline-block;
      padding: 10px 20px;
      background: #f8f9fa;
      border: 2px solid #962dff;
      border-radius: 8px;
      color: #962dff;
      text-decoration: none;
      font-weight: 600;
      font-size: 1em;
      transition: all 0.2s ease;
    }
    .social-link a:hover {
      background: #8a2be2;
      color: white;
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(29, 161, 242, 0.2);
    }
	        /* キャンセルボタン */
    .cancel-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #660099;
      color: white;
      padding: 8px 16px;
      font-size: 0.9em;
      border-radius: 6px;
    }
  </style>
</head>
<body>

  <div class="container">

    <!-- スタート画面 -->
    <div id="startScreen" class="start-screen active">
      <h2>Part1 Section3</h2>
      <p>出題する問題数を入力してください（1〜97）</p>
      <div class="input-group">
        <input type="number" id="questionCount" min="1" max="97" value="20" />
      </div>
      <button id="startBtn">クイズ開始</button>
	        <div class="social-link">
        <a href="https://stock4500-quiz.netlify.app/" rel="noopener">
          ホームに戻る
        </a></div>
    </div>

    <!-- クイズ画面 -->
    <div id="quizScreen" class="quiz-screen">
	            <!-- キャンセルボタン -->
      <button class="cancel-btn" id="cancelBtn">キャンセル</button>
      <div class="progress" id="progress">問題 1/5</div>
      <div class="question" id="question">読み込み中...</div>
      <ul class="options" id="options"></ul>
      <div class="result" id="result"></div>
    </div>

    <!-- 結果画面 -->
    <div id="resultScreen" class="result-screen">
      <h2>クイズ終了！</h2>
      <div class="final-score" id="finalScore">得点: 0 / 0</div>
      <div id="accuracy">正答率: 0%</div>
      <button class="restart" onclick="location.reload()">もう一度挑戦</button>
    </div>

  </div>

  <script>
    // 問題データ
    const quizData = [
{ question: "心/精神 気にする", options: ["mind", "dwindle", "folklore", "instruction"], correct: 0 },
{ question: "遠い 遠くに", options: ["far", "accuracy", "enthusiastic", "counterproductive"], correct: 0 },
{ question: "もっと遠い もっと遠くに", options: ["farther", "prior", "coordinate", "objective"], correct: 0 },
{ question: "最も遠い 最も遠くに", options: ["farthest", "chance", "temporary", "seize"], correct: 0 },
{ question: "さらに進んだ さらに(進んで)", options: ["further", "orbit", "congestion", "awaken"], correct: 0 },
{ question: "最も遠い 最も", options: ["furthest", "credit", "aloud", "apartment"], correct: 0 },
{ question: "はるかに", options: ["much", "neat", "vulnerable", "citizenship"], correct: 0 },
{ question: "いっそう", options: ["even", "tragedy", "preventive", "vowel"], correct: 0 },
{ question: "静止した なおいっそう", options: ["still", "even", "radius", "bend"], correct: 0 },
{ question: "哺乳類", options: ["mammal", "basic", "yield", "intellect"], correct: 0 },
{ question: "必ず", options: ["neccessarily", "rid", "competition", "promising"], correct: 0 },
{ question: "完全に", options: ["altogether", "different", "the Self-Defense Forces", "apply"], correct: 0 },
{ question: "完全に", options: ["completely", "socialize", "integrity", "reckless"], correct: 0 },
{ question: "〜を考慮すると", options: ["given", "brochure", "prey", "seed"], correct: 0 },
{ question: "〜に関して", options: ["concerning", "upset", "drive", "outlook"], correct: 0 },
{ question: "利益", options: ["behalf", "uncover", "negotiation", "insight"], correct: 0 },
{ question: "みなす 考慮，関連", options: ["regard", "ordinary", "trustworthy", "sensitive"], correct: 0 },
{ question: "気にかけない", options: ["regardless", "valiable", "assumption", "ample"], correct: 0 },
{ question: "前の", options: ["prior", "cheerful", "toddler", "dawn"], correct: 0 },
{ question: "〜だけれども だけれども", options: ["though", "seek", "hypocrisy", "surgical"], correct: 0 },
{ question: "一度 いったん〜すると", options: ["once", "grant", "magnificent", "lavatory"], correct: 0 },
{ question: "〜する一方で", options: ["whereas", "innovation", "explanation", "exceptional"], correct: 0 },
{ question: "〜するところで", options: ["whereas", "Mozart", "repay", "luxury"], correct: 0 },
{ question: "瞬間", options: ["moment", "convenient", "clumsy", "disappear"], correct: 0 },
{ question: "瞬間 厳密な", options: ["minute", "still", "evidence", "practical"], correct: 0 },
{ question: "瞬間", options: ["instant", "innate", "else", "reassure"], correct: 0 },
{ question: "思う もし〜なら", options: ["suppose", "marvel", "assign", "favor"], correct: 0 },
{ question: "もし〜なら", options: ["supposing", "spare", "sew", "valiable"], correct: 0 },
{ question: "もひ〜なら", options: ["provided", "abandon", "broaden", "monument"], correct: 0 },
{ question: "もし〜なら", options: ["providing", "collapse", "eagerly", "otherwise"], correct: 0 },
{ question: "場合", options: ["case", "nest", "marine", "mechanism"], correct: 0 },
{ question: "今", options: ["now", "recent", "meal", "recognition"], correct: 0 },
{ question: "考え", options: ["notion", "command", "animation", "unwind"], correct: 0 },
{ question: "主張", options: ["argument", "utmost", "coordinate", "greed"], correct: 0 },
{ question: "主張", options: ["assertion", "devote", "constitution", "subject"], correct: 0 },
{ question: "仮定", options: ["assumption", "nonverbal", "fate", "enhance"], correct: 0 },
{ question: "可能性", options: ["probability", "monotonous", "authority", "improvise"], correct: 0 },
{ question: "見込み", options: ["prospect", "microwave", "probability", "face-to-face"], correct: 0 },
{ question: "荷物(一式)", options: ["luggage", "yawn", "chaos", "invest"], correct: 0 },
{ question: "衣類(全般)", options: ["clothing", "gross", "container", "glimpse"], correct: 0 },
{ question: "装置類", options: ["equpment", "grain", "affectionate", "shrug"], correct: 0 },
{ question: "紙", options: ["paper", "mineral", "vertical", "emigrate"], correct: 0 },
{ question: "授業料", options: ["tuition", "transportion", "expense", "self-esteem"], correct: 0 },
{ question: "報酬", options: ["fee", "appointment", "mood", "warn"], correct: 0 },
{ question: "運賃", options: ["fare", "trivial", "question", "maximum"], correct: 0 },
{ question: "罰金 罰金を科する 立派な", options: ["fine", "gender", "terrific", "pursue"], correct: 0 },
{ question: "通行料金", options: ["toll", "deliberately", "lens", "wrinkle"], correct: 0 },
{ question: "1つも〜ない", options: ["none", "kneel", "haste", "tender"], correct: 0 },
{ question: "唯一の", options: ["sole", "faculty", "comperhend", "vapor"], correct: 0 },
{ question: "確信して/ある〜", options: ["certain", "overturn", "embrace", "astonish"], correct: 0 },
{ question: "出席している/現在の", options: ["present", "blind", "diagram", "defect"], correct: 0 },
{ question: "分別がある", options: ["sensible", "character", "immense", "striking"], correct: 0 },
{ question: "敏感な", options: ["sensitive", "nonprofit", "waealth", "invisible"], correct: 0 },
{ question: "経済の", options: ["economic", "brave", "memorable", "discard"], correct: 0 },
{ question: "お得な", options: ["economical", "mobile", "regard", "deprive"], correct: 0 },
{ question: "文字通りの", options: ["literal", "dissolve", "planet", "alter"], correct: 0 },
{ question: "使いこなす能力", options: ["literacy", "infection", "claim", "vowel"], correct: 0 },
{ question: "読み書きできる", options: ["literate", "fiction", "deliberate", "shellfish"], correct: 0 },
{ question: "文学の", options: ["literary", "diameter", "strike", "horizontal"], correct: 0 },
{ question: "勤勉な", options: ["industrious", "adolescence", "maternity", "summit"], correct: 0 },
{ question: "産業の", options: ["industrial", "sensible", "mysterious", "congestion"], correct: 0 },
{ question: "かなりの", options: ["considerable", "environmentally", "decline", "consequence"], correct: 0 },
{ question: "思いやりがある", options: ["considerate", "TED Talks", "myth", "admire"], correct: 0 },
{ question: "利用できる", options: ["available", "contaminate", "riot", "astonish"], correct: 0 },
{ question: "交渉できる", options: ["negotiable", "conservation", "chilly", "last"], correct: 0 },
{ question: "手ごろな", options: ["affordable", "villa", "superb", "adherence"], correct: 0 },
{ question: "信頼性が高い", options: ["dependable", "cling", "penetrate", "almost"], correct: 0 },
{ question: "忘れられない", options: ["unforgettable", "boss", "authentic", "multitask"], correct: 0 },
{ question: "著しい", options: ["remarkable", "emerge", "conscience", "given"], correct: 0 },
{ question: "当てはまる", options: ["applicable", "blend", "hit", "boast"], correct: 0 },
{ question: "長持ちする", options: ["durable", "healthy", "reside", "cyberbullying"], correct: 0 },
{ question: "証明できる", options: ["provable", "complaint", "dignity", "transplant"], correct: 0 },
{ question: "好意的な", options: ["favorable", "irresponsible", "aesthetic", "intellectual"], correct: 0 },
{ question: "目に見えない", options: ["invisible", "demonstrate", "fame", "theorize"], correct: 0 },
{ question: "柔軟な", options: ["flexible", "enhance", "aspeect", "agenda"], correct: 0 },
{ question: "便利な", options: ["convenient", "vulnerable", "prospective", "rug"], correct: 0 },
{ question: "別の", options: ["another", "bouquet", "ubiquitous", "hand"], correct: 0 },
{ question: "さらに", options: ["furthermore", "vomit", "deliberately", "console"], correct: 0 },
{ question: "加えて", options: ["additionally", "silence", "stick", "seed"], correct: 0 },
{ question: "同様に", options: ["similarly", "theft", "stressful", "prestigious"], correct: 0 },
{ question: "結果として", options: ["consequently", "cleanse", "surmount", "suburban"], correct: 0 },
{ question: "それゆえ/それに応じて", options: ["accordingly", "engage", "available", "durable"], correct: 0 },
{ question: "ついに", options: ["eventually", "mutter", "the Northrn Territories", "reschedule"], correct: 0 },
{ question: "このように/したがって", options: ["thus", "refined", "greed", "engage"], correct: 0 },
{ question: "すなわち", options: ["namely", "souvenir", "prescribe", "especially"], correct: 0 },
{ question: "海外へ(で)", options: ["overseas", "unexpected", "uncover", "informal"], correct: 0 },
{ question: "繁華街に", options: ["downtown", "hurt", "breed", "befeat"], correct: 0 },
{ question: "最近は", options: ["lately", "impossible", "steer", "extracurricular"], correct: 0 },
{ question: "もう少しで", options: ["almost", "outlook", "address", "blind"], correct: 0 },
{ question: "もう少しで", options: ["nearly", "million", "component", "emigrate"], correct: 0 },
{ question: "たいてい", options: ["mostly", "transportion", "mysterious", "contradict"], correct: 0 },
{ question: "何とかして", options: ["somehow", "accommodation", "presentation", "profession"], correct: 0 },
{ question: "もしかすると", options: ["perhaps", "strengthen", "latitude", "ambiguous"], correct: 0 },
{ question: "その間に", options: ["meanwhile", "minimize", "amaze", "exhibit"], correct: 0 },
{ question: "その代わりに", options: ["instead", "engine", "usage", "celebration"], correct: 0 },
{ question: "単に", options: ["merely", "appoint", "talkative", "merchant"], correct: 0 },
{ question: "とても だから", options: ["so", "undermine", "bullying", "possibly"], correct: 0 },
    ];

    let totalQuestions = 5;
    let currentQuestion = 0;
    let score = 0;
    let availableQuestions = [];
    let selectedAnswer = null;
    let currentCorrectIndex = -1;
    let isAnswered = false; // 回答済みフラグ
    let autoNextTimer = null; // 自動進行タイマー

    const startScreen = document.getElementById('startScreen');
    const quizScreen = document.getElementById('quizScreen');
    const resultScreen = document.getElementById('resultScreen');
    const questionCountInput = document.getElementById('questionCount');
    const startBtn = document.getElementById('startBtn');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const resultEl = document.getElementById('result');
    const progressEl = document.getElementById('progress');
    const finalScoreEl = document.getElementById('finalScore');
    const accuracyEl = document.getElementById('accuracy');

    // 開始ボタン
    startBtn.onclick = () => {
      let input = parseInt(questionCountInput.value);
      if (isNaN(input) || input < 1) input = 1;
      if (input > quizData.length) input = quizData.length;
      totalQuestions = input;

      startScreen.classList.remove('active');
      quizScreen.classList.add('active');

      currentQuestion = 0;
      score = 0;
      availableQuestions = [...quizData];
      loadQuestion();
    };

    // 問題読み込み
    function loadQuestion() {
      if (currentQuestion >= totalQuestions) {
        showResult();
        return;
      }

      // タイマークリア
      if (autoNextTimer) clearTimeout(autoNextTimer);

      const randomIndex = Math.floor(Math.random() * availableQuestions.length);
      const q = availableQuestions[randomIndex];

      currentQuestion++;
      questionEl.textContent = q.question;
      progressEl.textContent = `問題 ${currentQuestion}/${totalQuestions}`;

      // 選択肢シャッフル
      const indices = [0, 1, 2, 3];
      for (let i = indices.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [indices[i], indices[j]] = [indices[j], indices[i]];
      }
      currentCorrectIndex = indices.indexOf(q.correct);

      const optionIdBase = `option-${currentQuestion}-${Date.now()}`;
      optionsEl.innerHTML = '';
      indices.forEach((origIdx, shuffledIdx) => {
        const id = `${optionIdBase}-${shuffledIdx}`;
        const li = document.createElement('li');
        li.innerHTML = `
          <label for="${id}">
            <input type="radio" id="${id}" name="answer" value="${shuffledIdx}">
            ${q.options[origIdx]}
          </label>
        `;
        optionsEl.appendChild(li);
      });

    // キャンセルボタン
    cancelBtn.onclick = () => {
      if (confirm("クイズをキャンセルしますか？\n（進捗は保存されません）")) {
        cancelQuiz();
      }
    };

    // キャンセル処理
    function cancelQuiz() {
      if (autoNextTimer) clearTimeout(autoNextTimer);
      quizScreen.classList.remove('active');
      startScreen.classList.add('active');

      // 状態リセット
      currentQuestion = 0;
      score = 0;
      selectedQuestions = [];
      selectedAnswer = null;
      isAnswered = false;
    }
      // 状態リセット
      isAnswered = false;
      selectedAnswer = null;
      resultEl.textContent = '';
      resultEl.className = "result";

      // 選択肢クリック → 即判定
      document.querySelectorAll('input[name="answer"]').forEach(radio => {
        radio.onchange = () => {
          if (isAnswered) return;
          isAnswered = true;
          selectedAnswer = parseInt(radio.value);
          judgeAnswer();
        };
      });

      // 使用済み削除
      availableQuestions.splice(randomIndex, 1);
    }

    // 回答判定
    function judgeAnswer() {
      // 選択肢無効化
      document.querySelectorAll('input[name="answer"]').forEach(radio => {
        radio.disabled = true;
        radio.parentElement.classList.add('disabled');
      });

      const correctLabel = optionsEl.children[currentCorrectIndex].querySelector('label');
      correctLabel.classList.add('correct-highlight');

      if (selectedAnswer !== currentCorrectIndex) {
        const selectedLabel = optionsEl.children[selectedAnswer].querySelector('label');
        selectedLabel.classList.add('incorrect-highlight');
      }

      // 正誤表示
      if (selectedAnswer === currentCorrectIndex) {
        score++;
        resultEl.textContent = "正解！";
        resultEl.className = "result correct";
      } else {
        const correctText = correctLabel.textContent.trim();
        resultEl.innerHTML = `不正解…<br>正解は「<strong>${correctText}</strong>」です。`;
        resultEl.className = "result incorrect";
      }

      // 2秒後に次へ
      autoNextTimer = setTimeout(() => {
        loadQuestion();
      }, 2000);
    }

    // 結果表示
    function showResult() {
      if (autoNextTimer) clearTimeout(autoNextTimer);
      quizScreen.classList.remove('active');
      resultScreen.classList.add('active');
      const accuracy = totalQuestions > 0 ? Math.round((score / totalQuestions) * 100) : 0;
      finalScoreEl.textContent = `得点: ${score} / ${totalQuestions}`;
      accuracyEl.textContent = `正答率: ${accuracy}%`;
    }
  </script>

</body>
</html>
